<app-navbar></app-navbar>
<div class="container mt-4">
  <h2>Kullanıcı Listesi</h2>
  <div class="form-group">
    <input type="text" class="form-control" placeholder="Ara" [(ngModel)]="searchKeyword" (input)="searchKullanicilar()">
  </div>
  <div *ngIf="filteredKullanicilar.length > 0; else noData">
    <table class="table table-striped table-info">
      <thead>
        <tr>
          <th scope="col"><input type="checkbox" (change)="selectAll($event)"></th>
          <th scope="col">Ad</th>
          <th scope="col">Soyad</th>
          <th scope="col">Email</th>
          <th scope="col">Telefon</th>
          <th scope="col">Adres</th>
          <th scope="col">Rol</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let kullanici of filteredKullanicilar | paginate: { itemsPerPage: 5, currentPage: page }">
          <td><input type="checkbox" [(ngModel)]="kullanici.selected" (change)="updateSelectedItems()"></td>
          <td>{{ kullanici.name }}</td>
          <td>{{ kullanici.surname }}</td>
          <td>{{ kullanici.email }}</td>
          <td>{{ kullanici.phone }}</td>
          <td>{{ kullanici.adress }}</td>
          <td>{{ kullanici.role }}</td>
        </tr>
      </tbody>
    </table>
    <pagination-controls (pageChange)="page = $event"></pagination-controls>
  </div>

  <ng-template #noData>
    <p>Veri bulunamadı.</p>
  </ng-template>

  <div class="btn-container">
    <button class="btn1" type="button" (click)="openAddModal()">Yeni Kullanıcı Ekle</button>
    <button class="btn2" (click)="deleteSelectedKullanicilar()">Kullanıcı Sil</button>
    <button class="btn3" type="button" (click)="openUpdateModal()">Kullanıcı Düzenle</button>
    <button class="btn btn-primary" (click)="exportSelectedToExcel()">Export Selected to Excel</button>
  </div>
</div>
