<app-navbar></app-navbar>
<app-map [coordinates]="coordinates"></app-map>
<div class="tablo">
  <div class="container mt-4">
    <h2>Taşınmaz Listesi</h2>
    <div class="form-group">
      <input type="text" class="form-control" placeholder="Ara" [(ngModel)]="searchKeyword" (input)="searchTasinmaz()">
      <button class="btn btn-primary mt-2" (click)="searchTasinmaz()">Ara</button>
    </div>
    <div *ngIf="tasinmazlar.length > 0; else noData">
      <table class="table table-striped table-info">
        <thead>
          <tr>
            <th scope="col">Seç</th>
            <th scope="col">Ada</th>
            <th scope="col">Parsel</th>
            <th scope="col">Nitelik</th>
            <th scope="col">Koordinat Bilgileri</th>
            <th scope="col">Mahalle ID</th>
            <th scope="col">Mahalle</th>
            <th scope="col">İlçe</th>
            <th scope="col">İl</th>
            <th scope="col">Adres</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let tasinmaz of tasinmazlar | paginate: { itemsPerPage: 5, currentPage: page }">
            <td><input type="checkbox" [(ngModel)]="tasinmaz.selected" (change)="selectRow(tasinmaz)"></td>  
            <td>{{ tasinmaz.ada }}</td>
            <td>{{ tasinmaz.parsel }}</td>
            <td>{{ tasinmaz.nitelik }}</td>
            <td>{{ tasinmaz.koordinatBilgileri }}</td>
            <td>{{ tasinmaz.mahalleId }}</td>
            <td>{{ tasinmaz.mahalle.name }}</td>
            <td>{{ tasinmaz.mahalle.ilce.name }}</td>
            <td>{{ tasinmaz.mahalle.ilce.il.name }}</td>
            <td>{{ tasinmaz.adres }}</td>
          </tr>
        </tbody>
      </table>
      <pagination-controls (pageChange)="page = $event"></pagination-controls>
    </div>
  
    <ng-template #noData>
      <p>Veri bulunamadı.</p>
    </ng-template>
  
    <div class="btn-container">
      <button class="btn1" type="button" data-bs-toggle="modal" data-bs-target="#addTasinmazModal">Yeni Taşınmaz Ekle</button>
      <button class="btn2" (click)="deleteSelectedTasinmaz()">Taşınmaz Sil</button>
      <button class="btn3" type="button" (click)="openUpdateModal()">Taşınmaz Düzenle</button>
      <button class="btn btn-primary" (click)="exportToExcel()">Export to Excel</button>
    </div>
  </div>
</div>
<app-add></app-add>
